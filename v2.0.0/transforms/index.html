<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Transforms and matrices · Luxor</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Luxor logo"/></a><div class="docs-package-name"><span class="docs-autofit">Luxor</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction to Luxor</a></li><li><a class="tocitem" href="../examples/">A few examples</a></li><li><a class="tocitem" href="../tutorial/">Tutorial</a></li><li><a class="tocitem" href="../basics/">Basic concepts</a></li><li><a class="tocitem" href="../simplegraphics/">Simple shapes</a></li><li><a class="tocitem" href="../moregraphics/">More graphics</a></li><li><a class="tocitem" href="../geometrytools/">Geometry tools</a></li><li><a class="tocitem" href="../tables-grids/">Tables and grids</a></li><li><a class="tocitem" href="../colors-styles/">Colors and styles</a></li><li><a class="tocitem" href="../polygons/">Polygons and paths</a></li><li><a class="tocitem" href="../text/">Text</a></li><li class="is-active"><a class="tocitem" href>Transforms and matrices</a><ul class="internal"><li><a class="tocitem" href="#Scaling-of-lines-1"><span>Scaling of lines</span></a></li><li class="toplevel"><a class="tocitem" href="#Matrices-and-transformations-1"><span>Matrices and transformations</span></a></li></ul></li><li><a class="tocitem" href="../clipping/">Clipping</a></li><li><a class="tocitem" href="../images/">Images</a></li><li><a class="tocitem" href="../turtle/">Turtle graphics</a></li><li><a class="tocitem" href="../animation/">Animation</a></li><li><a class="tocitem" href="../moreexamples/">More examples</a></li><li><a class="tocitem" href="../functionindex/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Transforms and matrices</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Transforms and matrices</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaGraphics/Luxor.jl/blob/master/docs/src/transforms.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Transforms-and-matrices-1"><a class="docs-heading-anchor" href="#Transforms-and-matrices-1">Transforms and matrices</a><a class="docs-heading-anchor-permalink" href="#Transforms-and-matrices-1" title="Permalink"></a></h1><p>For basic transformations of the drawing space, use <code>scale(sx, sy)</code>, <code>rotate(a)</code>, and <code>translate(tx, ty)</code>.</p><p><code>translate()</code> shifts the current axes by the specified amounts in x and y. It&#39;s relative and cumulative, rather than absolute:</p><pre><code class="language-julia">origin()
for i in range(0, step=30, length=6)
    sethue(HSV(i, 1, 1)) # from Colors
    setopacity(0.5)
    circle(0, 0, 40, :fillpreserve)
    setcolor(&quot;black&quot;)
    strokepath()
    translate(50, 0)
end</code></pre><p><img src="../assets/figures/translate.png" alt="translate"/></p><p><code>scale(x, y)</code> or <code>scale(n)</code> scales the current workspace by the specified amounts. Again, it&#39;s relative to the current scale, not to the document&#39;s original.</p><pre><code class="language-julia">origin()
for i in range(0, step=30, length=6)
    sethue(HSV(i, 1, 1)) # from Colors
    circle(0, 0, 90, :fillpreserve)
    setcolor(&quot;black&quot;)
    strokepath()
    scale(0.8, 0.8)
end</code></pre><p><img src="../assets/figures/scale.png" alt="scale"/></p><p><code>rotate()</code> rotates the current workspace by the specified amount about the current 0/0 point. It&#39;s relative to the previous rotation, not to the document&#39;s original.</p><pre><code class="language-julia">origin()
for i in 1:8
    randomhue()
    squircle(Point(40, 0), 20, 30, :fillpreserve)
    sethue(&quot;black&quot;)
    strokepath()
    rotate(π/4)
end</code></pre><p><img src="../assets/figures/rotate.png" alt="rotate"/></p><p>To return home after many changes, you can use <code>setmatrix([1, 0, 0, 1, 0, 0])</code> to reset the matrix to the default. <code>origin()</code> resets the matrix then moves the origin to the center of the page.</p><p><code>rescale()</code> is a convenient utility function for linear interpolation, also called a &quot;lerp&quot;.</p><article class="docstring"><header><a class="docstring-binding" id="Luxor.scale" href="#Luxor.scale"><code>Luxor.scale</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">scale(x, y)</code></pre><p>Scale workspace by <code>x</code> and <code>y</code>.</p><p>Example:</p><pre><code class="language-none">scale(0.2, 0.3)</code></pre></div></section><section><div><pre><code class="language-none">scale(f)</code></pre><p>Scale workspace by <code>f</code> in both <code>x</code> and <code>y</code>.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Luxor.rotate" href="#Luxor.rotate"><code>Luxor.rotate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">rotate(a::Float64)</code></pre><p>Rotate workspace by <code>a</code> radians clockwise (from positive x-axis to positive y-axis).</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Luxor.translate" href="#Luxor.translate"><code>Luxor.translate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">translate(point)
translate(x::Real, y::Real)</code></pre><p>Translate the workspace to <code>x</code> and <code>y</code> or to <code>pt</code>.</p></div></section></article><h2 id="Scaling-of-lines-1"><a class="docs-heading-anchor" href="#Scaling-of-lines-1">Scaling of lines</a><a class="docs-heading-anchor-permalink" href="#Scaling-of-lines-1" title="Permalink"></a></h2><p>Line thicknesses are not scaled. For example, with a line thickness set by <code>setline(1)</code>, lines drawn before and after <code>scale(2)</code> will be the same thickness. If you want line thicknesses to respond to the current scale, so that after say <code>setline(1)</code>, lines change thickness after calls to <code>scale(n)</code>, you could define your own <code>strokeraw()</code> function that calls the <code>cairo_stroke</code> primitive directly:</p><pre><code class="language-none">import Cairo
function strokeraw()
    ccall((:cairo_stroke, Cairo._jl_libcairo), Nothing, (Ptr{Nothing},), Luxor.get_current_cr().ptr)
end</code></pre><h1 id="Matrices-and-transformations-1"><a class="docs-heading-anchor" href="#Matrices-and-transformations-1">Matrices and transformations</a><a class="docs-heading-anchor-permalink" href="#Matrices-and-transformations-1" title="Permalink"></a></h1><p>In Luxor, there&#39;s always a <em>current matrix</em>. It&#39;s a six element array:</p><div>\[\begin{bmatrix}
1 &amp; 0 &amp; 0 \\
0 &amp; 1 &amp; 0 \\
\end{bmatrix}\]</div><p>which is usually handled in Julia/Cairo/Luxor as a simple vector/array:</p><pre><code class="language-none">julia&gt; getmatrix()
6-element Array{Float64,1}:
   1.0
   0.0
   0.0
   1.0
   0.0
   0.0</code></pre><p><code>transform(a)</code> transforms the current workspace by &#39;multiplying&#39; the current matrix with matrix <code>a</code>. For example, <code>transform([1, 0, xskew, 1, 50, 0])</code> skews the current matrix by <code>xskew</code> radians and moves it 50 in x and 0 in y.</p><pre><code class="language-julia">function boxtext(p, t)
    sethue(&quot;grey30&quot;)
    box(p, 30, 50, :fill)
    sethue(&quot;white&quot;)
    textcentered(t, p)
end

for i in 0:5
    xskew = tand(i * 5.0)
    transform([1, 0, xskew, 1, 50, 0])
    boxtext(O, string(round(rad2deg(xskew), digits=1), &quot;°&quot;))
end</code></pre><p><img src="../assets/figures/transform.png" alt="transform"/></p><p><code>getmatrix()</code> gets the current matrix, <code>setmatrix(a)</code> sets the matrix to array <code>a</code>.</p><article class="docstring"><header><a class="docstring-binding" id="Luxor.getmatrix" href="#Luxor.getmatrix"><code>Luxor.getmatrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">getmatrix()</code></pre><p>Get the current matrix. Returns an array of six float64 numbers:</p><ul><li><p>xx component of the affine transformation</p></li><li><p>yx component of the affine transformation</p></li><li><p>xy component of the affine transformation</p></li><li><p>yy component of the affine transformation</p></li><li><p>x0 translation component of the affine transformation</p></li><li><p>y0 translation component of the affine transformation</p></li></ul><p>Some basic matrix transforms:</p><ul><li>translate</li></ul><p><code>transform([1, 0, 0, 1, dx, dy])</code> shifts by <code>dx</code>, <code>dy</code></p><ul><li>scale</li></ul><p><code>transform([fx 0 0 fy 0 0])</code> scales by <code>fx</code> and <code>fy</code></p><ul><li>rotate</li></ul><p><code>transform([cos(a), -sin(a), sin(a), cos(a), 0, 0])</code> rotates around to <code>a</code> radians</p><p>rotate around O: [c -s s c 0 0]</p><ul><li>shear</li></ul><p><code>transform([1 0 a 1 0 0])</code> shears in x direction by <code>a</code></p><p>shear in y direction by <code>a</code>: [1 a 0 1 0 0]</p><ul><li>x-skew</li></ul><p><code>transform([1, 0, tan(a), 1, 0, 0])</code> skews in x by <code>a</code></p><ul><li>y-skew</li></ul><p><code>transform([1, tan(a), 0, 1, 0, 0])</code> skews in y by <code>a</code></p><ul><li>flip</li></ul><p><code>transform([fx, 0, 0, fy, centerx * (1 - fx), centery * (fy-1)])</code> flips with center at <code>centerx</code>/<code>centery</code></p><ul><li>reflect</li></ul><p><code>transform([1 0 0 -1 0 0])</code> reflects in xaxis</p><p><code>transform([-1 0 0 1 0 0])</code> reflects in yaxis</p><p>When a drawing is first created, the matrix looks like this:</p><pre><code class="language-none">getmatrix() = [1.0, 0.0, 0.0, 1.0, 0.0, 0.0]</code></pre><p>When the origin is moved to 400/400, it looks like this:</p><pre><code class="language-none">getmatrix() = [1.0, 0.0, 0.0, 1.0, 400.0, 400.0]</code></pre><p>To reset the matrix to the original:</p><pre><code class="language-none">setmatrix([1.0, 0.0, 0.0, 1.0, 0.0, 0.0])</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Luxor.setmatrix" href="#Luxor.setmatrix"><code>Luxor.setmatrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">setmatrix(m::Array)</code></pre><p>Change the current matrix to matrix <code>m</code>. Use <code>getmatrix()</code> to get the current matrix.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Luxor.transform" href="#Luxor.transform"><code>Luxor.transform</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">transform(a::Array)</code></pre><p>Modify the current matrix by multiplying it by matrix <code>a</code>.</p><p>For example, to skew the current state by 45 degrees in x and move by 20 in y direction:</p><pre><code class="language-none">transform([1, 0, tand(45), 1, 0, 20])</code></pre><p>Use <code>getmatrix()</code> to get the current matrix.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Luxor.crossproduct" href="#Luxor.crossproduct"><code>Luxor.crossproduct</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">crossproduct(p1::Point, p2::Point)</code></pre><p>This is the <em>perp dot product</em>, really, not the crossproduct proper (which is 3D):</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Luxor.blendmatrix" href="#Luxor.blendmatrix"><code>Luxor.blendmatrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">blendmatrix(b::Blend, m)</code></pre><p>Set the matrix of a blend.</p><p>To apply a sequence of matrix transforms to a blend:</p><pre><code class="language-none">A = [1 0 0 1 0 0]
Aj = cairotojuliamatrix(A)
Sj = scalingmatrix(2, .2) * Aj
Tj = translationmatrix(10, 0) * Sj
A1 = juliatocairomatrix(Tj)
blendmatrix(b, As)</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Luxor.rotationmatrix" href="#Luxor.rotationmatrix"><code>Luxor.rotationmatrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">rotationmatrix(a)</code></pre><p>Return a 3x3 Julia matrix that will apply a rotation through <code>a</code> radians.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Luxor.scalingmatrix" href="#Luxor.scalingmatrix"><code>Luxor.scalingmatrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">scalingmatrix(sx, sy)</code></pre><p>Return a 3x3 Julia matrix that will apply a scaling by <code>sx</code> and <code>sy</code>.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Luxor.translationmatrix" href="#Luxor.translationmatrix"><code>Luxor.translationmatrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">translationmatrix(x, y)</code></pre><p>Return a 3x3 Julia matrix that will apply a translation in <code>x</code> and <code>y</code>.</p></div></section></article><p>Use the <code>getscale()</code>, <code>gettranslation()</code>, and <code>getrotation()</code> functions to find the current values of the current matrix. These can also find the values of arbitrary 3x3 matrices.</p><article class="docstring"><header><a class="docstring-binding" id="Luxor.getscale" href="#Luxor.getscale"><code>Luxor.getscale</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">getscale(R::Matrix)
getscale()</code></pre><p>Get the current scale of a Julia 3x3 matrix, or the current Luxor scale.</p><p>Returns a tuple of x and y values.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Luxor.gettranslation" href="#Luxor.gettranslation"><code>Luxor.gettranslation</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">gettranslation(R::Matrix)
gettranslation()</code></pre><p>Get the current translation of a Julia 3x3 matrix, or the current Luxor translation.</p><p>Returns a tuple of x and y values.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Luxor.getrotation" href="#Luxor.getrotation"><code>Luxor.getrotation</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">getrotation(R::Matrix)
getrotation()</code></pre><p>Get the rotation of a Julia 3x3 matrix, or the current Luxor rotation.</p><div>\[\begin{bmatrix}
a &amp; b &amp; tx \\
c &amp; d &amp; ty \\
0 &amp; 0 &amp; 1  \\
\end{bmatrix}\]</div><p>The rotation angle is <code>atan(-b, a)</code> or <code>atan(c, d)</code>.</p></div></section></article><p>You can convert between the 6-element and 3x3 versions of a transformation matrix using the functions <code>cairotojuliamatrix()</code> and <code>juliatocairomatrix()</code>.</p><article class="docstring"><header><a class="docstring-binding" id="Luxor.cairotojuliamatrix" href="#Luxor.cairotojuliamatrix"><code>Luxor.cairotojuliamatrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">cairotojuliamatrix(c)</code></pre><p>Return a 3x3 Julia matrix that&#39;s the equivalent of the six-element matrix in <code>c</code>.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="Luxor.juliatocairomatrix" href="#Luxor.juliatocairomatrix"><code>Luxor.juliatocairomatrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">juliatocairomatrix(c)</code></pre><p>Return a six-element matrix that&#39;s the equivalent of the 3x3 Julia matrix in <code>c</code>.</p></div></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../text/">« Text</a><a class="docs-footer-nextpage" href="../clipping/">Clipping »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 28 May 2020 12:39">Thursday 28 May 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
